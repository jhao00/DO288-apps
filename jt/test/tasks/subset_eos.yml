- name: Gather subset eos
  become: yes
  become_method: enable
  arista.eos.eos_facts:
    gather_subset:
      - "{{ what }}"

- name: debug
  vars:
    sep: "\n"
  debug:
    var: ansible_facts['net_config'] | regex_findall('^ip .*$', multiline=true)
      #var: ansible_facts

#- name: save facts to file
#  vars:
#    sep: "\n"
#  ansible.builtin.copy:
#    content: "{{ ansible_facts['net_config'] | split(sep) | to_nice_yaml }}"
#    dest: "{{ inventory_hostname }}_{{ what }}_all.yml"
