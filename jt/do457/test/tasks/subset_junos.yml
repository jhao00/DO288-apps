- name: Gather subset junos
  junipernetworks.junos.junos_facts:
    gather_subset:
      - "{{ what }}"
    config_format: json

- name: debug
  debug:
    var: ansible_facts | to_nice_yaml

- name: save junos facts to file
  ansible.builtin.copy:
    content: "{{ ansible_facts | to_nice_json }}"
    dest: "{{ inventory_hostname }}_{{ what }}_all.json"


